<!--飯店評論-->
<div class="container mt-5">

  <div>
      <h4 class="mb-3 font-sty">{{hotelName}} 住客評論</h4>
      <span class="comment-cube">{{totalAverageScore.toFixed(1)}}</span>
      <span>{{ratingFilter}}</span>
      <span> 共{{ totalItems }}則評論</span>
  </div>
  <hr />
  <!--評分條-->
  <div>
      <div class="container ">
          <h6 class="m-2 p-3">各項目評分：</h6>

          <div class="row m-2 ">
              <div class="col-4" *ngFor="let score if averageScores | keyvalue">
                  <div>
                      <span>{{score.key | titlecase}}</span>
                      <span id="comfort-score-avg">{{score.value}}</span>
                      <div class="progress2 progress-moved">
                          <div class="progress-bar2" [style.width.%]="score.value * 10">
                          </div>
                      </div>
                  </div>
              </div>
          </div>
        </div>
  </div>

  <!--篩選列-->
  <hr class="mt-5" />
  <h5 class="font-sty">篩選條件</h5>
  <div class="container">
      <div class="row">
          <div class="col">
              <label>
                  <span>
                      <span>評分</span>
                  </span>
              </label>
              <div>
                  <select class="form-select" aria-label="filter-rate" (change)="filterByRating($event)">
                      <option selected>全部({{ totalItems }})</option>
                      <option value="0">全部({{ totalItems }})</option>
                      <option value="2">超讚:9+(338)</option>
                      <option value="3">很讚:7-9(292)</option>
                      <option value="4">很好:5-7(78)</option>
                      <option value="5">尚可:3-5(15)</option>
                      <option value="6">低於預期:1-3(16)</option>
                  </select>
              </div>
          </div>
          <div class="col">
              <label>
                  <span>
                      <span>住宿期間</span>
                  </span>
              </label>
              <div>
                  <select class="form-select" aria-label="filter-during" (change)="filterByDate($event)">
                      <option selected>全部{{ totalItems }}</option>
                      <option value="1">全部{{ totalItems }}</option>
                      <option value="2">3-5月</option>
                      <option value="3">6-8月</option>
                      <option value="4">9-11月</option>
                      <option value="5">12-2月</option>
                  </select>
              </div>
          </div>
          <div class="col">
              <label>
                  <span>
                      <span>排序依據</span>
                  </span>
              </label>
              <div>
                  <select class="form-select" aria-label="filter-sort" (change)="sortBy($event)">
                      <option selected>最新</option>
                      <option value="1">最新</option>
                      <option value="2">最舊</option>
                      <option value="3">分數最高</option>
                      <option value="4">分數最低</option>
                  </select>
              </div>
          </div>
      </div>
  </div>

  <!--篩選bar-->
  <h5 class="font-sty mt-5">選擇主題以瀏覽相關評語</h5>
  <div class="mt-3">
      <label data-testid="topic-filter-component" *ngFor="let topic of ['客房', '地點', '床', '廁所', '安靜', '晚餐', '小孩', '停車']">
          <button type="button" class="btn btn-outline-primary" (click)="filterByTopic(topic)">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-lg" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2"></path>
              </svg>
              {{topic}}
          </button>
      </label>
      <label data-testid="topic-filter-component" (click)="toggleSearch()">
          <button type="button" class="btn btn-outline-primary" id="searchBtnpic" >
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                  <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0" />
              </svg>

          </button>
      </label>

      <div class="d-flex gap-4 justify-content-end mt-3" >
          <span>
              <input *ngIf="isSearchVisible" type="text" class="form-control" id="searchBar" aria-label="">
          </span>
          <input *ngIf="isSearchVisible" type="button" class="btn btn-outline-primary dispaly" id="searchBtn" value="搜尋">
      </div>

  </div>
</div>






<!--評論頁面切換-上 page動態產生-->
<nav aria-label="Page navigation example">
  <ul class="pagination container d-flex justify-content-center">
      <li class="page-item" [class.disabled]="queryParameters.page <= 1">
          <a class="page-link" href="#" aria-label="Previous" (click)="prevPage()">
              <span aria-hidden="true">&laquo;</span>
          </a>
      </li>

      <li class="page-item" *ngFor="let page of getPageNumbers()" [class.active]="page === queryParameters.page">
        <a class="page-link" href="#" (click)="setPage(page)">{{page}}</a>
      </li>

      <li class="page-item" [class.disabled]="queryParameters.page * queryParameters.pageSize >= totalItems">
          <a class="page-link" href="#" aria-label="Next" (click)="nextPage()">
              <span aria-hidden="true">&raquo;</span>
          </a>
      </li>
  </ul>
</nav>

<!--評論bar(後面要加一個<hr />)-->

<div class="container">
  <div class="row">
      <div class="col-4 p-2 ">
          <div class="py-2">
              <span class="commentList-left-score me-2">10.0</span>
              <span class="commentList-left-scoretxt">超棒</span>
          </div>
          <div class="fw-bold comment-left-fontsty"><i class="fa-solid fa-user "></i>  WANTING </div>
          <div><i class="fa-solid fa-suitcase fa-sm"></i> 入住1晚（2023年4月）</div>
          <div><i class="fa-solid fa-bed fa-sm"></i> 豪華雙人房 - 有浴缸</div>
          <div><i class="fa-solid fa-people-group fa-sm"></i> 家庭(嬰幼兒隨行)</div>
      </div>
      <div class="col-8 commentList-right mt-3 p-4 px-5">
          <div class="fw-bold fs-5">員工親切，房間乾淨</div>
          <div class="my-2">帶嬰兒一起出門有很多不方便，早班晚班的櫃檯都很親切的主動詢問及幫忙，房間很漂亮也很乾淨。離第二市場很近吃東西也很方便！</div>
          <div class="d-flex justify-content-between">
              <div class="comment-font-color">評論日期：2023年4月16日</div>
              <div class="comment-font-color text-end">
                  <a href="report_form.html" class="link">檢舉</a>
              </div>
          </div>
      </div>
  </div>
</div>
<hr class="container" />



<!--評論bar(後面要加一個<hr />每頁最後一個評論不用<hr/>)-->

<div class="container">
  <div class="row">
      <div class="col-4 p-2 ">
          <div class="py-3">
              <span class="commentList-left-score me-2">10.0</span>
              <span class="commentList-left-scoretxt">超棒</span>
          </div>
          <div class="fw-bold comment-left-fontsty"><i class="fa-solid fa-user "></i>  WANTING </div>
          <div><i class="fa-solid fa-suitcase fa-sm"></i> 入住1晚（2023年4月）</div>
          <div><i class="fa-solid fa-bed fa-sm"></i> 豪華雙人房 - 有浴缸</div>
          <div><i class="fa-solid fa-people-group fa-sm"></i> 家庭(嬰幼兒隨行)</div>
      </div>
      <div class="col-8 commentList-right mt-3 p-4 px-5">
          <div class="fw-bold fs-5">員工親切，房間乾淨</div>
          <div class="my-2">帶嬰兒一起出門有很多不方便，早班晚班的櫃檯都很親切的主動詢問及幫忙，房間很漂亮也很乾淨。離第二市場很近吃東西也很方便！</div>
          <div class="d-flex justify-content-between">
              <div class="comment-font-color">評論日期：2023年4月16日</div>
              <div class="comment-font-color text-end">
                  <a href="report_form.html" class="link">檢舉</a>
              </div>
          </div>
      </div>
  </div>
</div>


<!--評論頁面切換-下 page動態產生-->
<nav aria-label="Page navigation example">
  <ul class="pagination container d-flex justify-content-center">
      <li class="page-item" [class.disabled]="queryParameters.page <= 1">
          <a class="page-link" href="#" aria-label="Previous" (click)="prevPage()">
              <span aria-hidden="true">&laquo;</span>
          </a>
      </li>

      <li class="page-item" *ngFor="let page of getPageNumbers()" [class.active]="page === queryParameters.page">
        <a class="page-link" href="#" (click)="setPage(page)">{{page}}</a>
      </li>

      <li class="page-item" [class.disabled]="queryParameters.page * queryParameters.pageSize >= totalItems">
          <a class="page-link" href="#" aria-label="Next" (click)="nextPage()">
              <span aria-hidden="true">&raquo;</span>
          </a>
      </li>
  </ul>
</nav>
